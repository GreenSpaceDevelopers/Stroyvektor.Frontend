import clsx from 'clsx';
import { useState } from 'react';
import { Link } from 'react-router-dom';

import { BaseLoader } from '@shared/ui/BaseLoader/BaseLoader';
import { IFormData } from '@entities/telegram/models/IFormData';
import { messengerType } from '@shared/types/messengerType';
import { notifications } from '@mantine/notifications';
import { TextInput } from '@shared/ui-kit/input';
import { isValidPhone } from '@shared/utils';
import { useInputString } from '@shared/hooks';
import sendMessage from '@shared/api/telegram';

import { timeSlots } from '../timeSlots';
import styles from './Form.module.scss';

type TimeSlot = (typeof timeSlots)[number]['id'];

export const Form: React.FC = () => {
    const name = useInputString('');
    const phone = useInputString('');

    const [messengers, setMessengers] = useState<messengerType[]>(['call']);
    const [time, setTime] = useState<TimeSlot>('asap');

    const [errors, setErrors] = useState<{ name?: string; phone?: string }>({});
    const [isLoading, setLoading] = useState<boolean>(false);

    const handleSelectMessengers = (messenger: messengerType) => {
        setMessengers((prev) => {
            if (prev.length === 1 && prev.includes(messenger)) {
                return prev;
            }

            return prev.includes(messenger)
                ? prev.filter((m) => m !== messenger)
                : [...prev, messenger];
        });
    };
    const handleSelectTime = (slot: TimeSlot) => {
        setTime(slot);
    };

    const handleSendMessage = async () => {
        const newErrors: typeof errors = {};

        if (!name.value.trim()) {
            newErrors.name = 'Введите имя';
        }

        if (!phone.value.trim()) {
            newErrors.phone = 'Введите телефон';
        } else if (!isValidPhone(phone.value)) {
            newErrors.phone = 'Некорректный телефон';
        }

        setErrors(newErrors);

        if (Object.keys(newErrors).length > 0) {
            return;
        }

        setLoading(true);

        const data: IFormData = {
            name: name.value,
            phone: phone.value,
            messengers,
            time,
        };

        try {
            const response = await sendMessage(data);

            if (response) {
                name.reset();
                phone.reset();
                setMessengers(['call']);
                setTime('asap');
                setErrors({});

                notifications.show({
                    color: 'green',
                    title: 'Отправлено',
                    message: 'Мы скоро свяжемся с вами',
                });
            } else {
                notifications.show({
                    color: 'red',
                    title: 'Ошибка',
                    message: 'Не удалось отправить заявку',
                });
            }
        } catch {
            notifications.show({
                color: 'red',
                title: 'Ошибка сети',
                message: 'Попробуйте ещё раз',
            });
        } finally {
            setLoading(false);
        }
    };

    return (
        <div className={styles.form}>
            <div className={styles.formHeader}>
                <h4 className={styles.formHeaderTitle}>Оставьте заявку</h4>
                <svg
                    className={styles.formHeaderImg}
                    width="580"
                    height="1"
                    viewBox="0 0 580 1"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M5.52453 0.00508493C8.77469 -0.00794148 13.0351 0.00598687 16.273 0.0251043C17.2877 0.0310336 16.7739 0.0575377 17.4744 0.062824C18.8444 0.0731291 20.1208 0.0601305 21.4747 0.0724065C21.9233 0.0766045 21.3648 0.118587 21.8353 0.122028C24.4134 0.140582 26.8524 0.129888 29.4641 0.138812C42.3284 0.182843 54.9736 0.198602 67.9953 0.217731C72.2889 0.224002 77.5083 0.262103 81.9431 0.245441C82.4608 0.243458 82.1521 0.206608 82.2506 0.203571C83.7955 0.157075 83.2819 0.231467 84.2906 0.241351C88.2941 0.280377 92.746 0.283771 96.5989 0.269549C98.238 0.263391 96.5945 0.190198 98.245 0.23128C98.3596 0.234056 97.9437 0.273188 98.3932 0.277362C99.4126 0.286749 101.347 0.279755 102.137 0.282855C103.659 0.289028 103.911 0.288635 105.352 0.289081C107.32 0.290031 109.662 0.309483 111.775 0.300616C112.226 0.298607 111.629 0.258493 112.348 0.251666C113.067 0.244851 114.971 0.248252 115.613 0.257709C116.255 0.26717 115.982 0.298699 116.096 0.305926C117.03 0.366925 119.233 0.282442 119.516 0.280353C124.683 0.244753 129.114 0.29288 133.964 0.292743C137.646 0.292536 141.583 0.276648 145.086 0.278827C149.26 0.281578 152.798 0.303315 156.853 0.299579C157.281 0.29923 156.779 0.252065 157.302 0.251544C162.855 0.246056 168.369 0.251197 173.898 0.283038C174.452 0.286273 173.738 0.327684 174.292 0.333392C177.684 0.367424 183.05 0.449179 185.065 0.268878C187.362 0.275918 190.151 0.283193 192.207 0.319537C193.532 0.342929 192.245 0.388042 193.873 0.368792C194.24 0.364503 193.762 0.324995 194.313 0.321551C196.631 0.307088 199.164 0.31993 201.457 0.299518C201.924 0.295273 201.796 0.259872 201.929 0.253497C203.039 0.201871 204.888 0.287213 205.292 0.293414C208.361 0.339658 210.603 0.32146 213.462 0.322589C214.126 0.322871 213.342 0.27532 213.98 0.273883C217.292 0.267068 220.723 0.271155 223.965 0.292254C224.687 0.297062 224.023 0.337567 224.368 0.341937C225.888 0.360712 226.225 0.284209 227.682 0.300738C227.99 0.304125 227.817 0.3388 227.873 0.342608C228.75 0.402389 229.512 0.317684 229.738 0.315814C232.592 0.290261 234.417 0.378689 237.174 0.366168C237.504 0.36458 236.76 0.320706 237.687 0.318927C243.865 0.306815 250.399 0.318867 256.514 0.353961C257.465 0.359358 256.786 0.392317 256.846 0.39638C257.821 0.459864 258.452 0.374803 258.762 0.3716C261.207 0.348541 263.492 0.419874 265.154 0.31856C275.511 0.35372 285.822 0.296827 296.094 0.387591C296.224 0.388642 295.99 0.430535 296.251 0.432452C299.388 0.455974 298.786 0.390866 300.862 0.311236C301.385 0.291241 302.976 0.38738 303.116 0.394427C303.629 0.420396 303.097 0.48272 303.269 0.487749C304.69 0.527241 304.458 0.32113 306.375 0.321063C306.435 0.321407 306.184 0.359344 306.344 0.363116C306.844 0.374958 307.34 0.359883 307.829 0.372943C308.948 0.403161 309.347 0.503313 311.057 0.445025C311.274 0.43746 310.943 0.320545 312.655 0.326068C313.337 0.328369 316.357 0.326365 317.203 0.333941C318.049 0.341509 317.468 0.379185 317.529 0.380816C319.807 0.430636 318.943 0.451284 320.084 0.525042C321.225 0.598522 320.909 0.423265 321.374 0.403704C321.84 0.384199 323.51 0.425303 323.921 0.439593C324.331 0.453888 323.819 0.477829 324.184 0.485918C326.603 0.538773 325.246 0.398928 326.043 0.371112C327.921 0.305249 329.385 0.435219 331.105 0.447955C331.57 0.451394 331.19 0.421792 331.605 0.419024C333.246 0.408452 334.233 0.449006 336.101 0.411822C336.406 0.405762 337.916 0.327621 338.893 0.384966C339.031 0.393236 338.638 0.425624 339.338 0.432879C340.383 0.443767 342.265 0.450846 343.389 0.44002C344.218 0.43201 343.268 0.378642 344.311 0.39522C344.775 0.402623 343.915 0.433844 344.787 0.445147C345.654 0.456447 347.871 0.455075 348.714 0.453997C349.556 0.452895 349.095 0.412413 349.163 0.409686C349.575 0.394063 351.191 0.374542 351.334 0.374591C358.537 0.369649 365.179 0.437886 372.191 0.415301C372.742 0.413587 372.375 0.370898 372.459 0.370196C374.343 0.35231 372.858 0.465811 374.174 0.503802C373.984 0.417172 374.761 0.432858 376.088 0.423357C376.727 0.418709 376.379 0.385165 376.437 0.381732C377.386 0.330783 378.046 0.39659 378.216 0.410052C378.844 0.459572 379.528 0.401061 379.955 0.434161C380.382 0.467013 379.399 0.515717 380.672 0.515093C381.029 0.484083 380.084 0.403044 381.05 0.38991C384.696 0.340231 391.502 0.403813 394.434 0.410418C397.36 0.417017 398.305 0.411296 400.01 0.422503C403.089 0.442767 401.961 0.382641 403.873 0.35512C405.79 0.327603 404.858 0.475539 405.134 0.507342C405.404 0.53913 405.7 0.506407 406.037 0.523882C406.372 0.541353 405.646 0.562976 406.435 0.569536C407.224 0.57609 409.383 0.519537 409.663 0.486285C410.255 0.415836 409.282 0.341897 411.371 0.367877C411.491 0.369419 411.101 0.408318 411.561 0.412249C415.215 0.442195 419.012 0.444052 422.661 0.470538C423.163 0.47424 422.715 0.517514 423.007 0.520159C426.049 0.547838 424.961 0.474872 426.629 0.393817C426.254 0.501684 427.176 0.567679 429.485 0.568316C430.873 0.568736 430.634 0.521625 431.531 0.488421C431.801 0.478411 432.783 0.51076 432.961 0.488604C433.548 0.41618 432.623 0.335106 435.003 0.367388C435.107 0.368923 434.775 0.408567 435.136 0.410967C437.468 0.426682 437.747 0.350928 440.269 0.341754C442.245 0.334555 445.76 0.380749 448.01 0.388262C447.963 0.509537 450.089 0.481767 450.951 0.39815C452.411 0.401573 453.989 0.396846 455.4 0.408404C455.886 0.412344 455.567 0.447457 455.628 0.45125C456.568 0.510765 457.202 0.429415 457.518 0.426226C460.934 0.395224 463.718 0.456881 466.978 0.396624C467.094 0.394454 467.282 0.310213 468.153 0.371722C468.21 0.375962 467.133 0.41429 468.667 0.417254C470.201 0.420225 473.093 0.465384 475.222 0.426348C475.738 0.416951 477.041 0.348564 478.088 0.401995C478.227 0.409251 478.074 0.433411 478.276 0.446856C478.926 0.489695 479.281 0.404549 480.046 0.476885C480.81 0.549219 482.4 0.603391 484.548 0.553484C484.617 0.552033 485.125 0.484546 485.8 0.485613C486.879 0.487375 488.409 0.501433 489.535 0.500994C490.074 0.500759 489.729 0.458853 489.823 0.458086C493.447 0.434604 496.027 0.471963 499.91 0.488177C500.621 0.491232 502.667 0.434086 504.045 0.479266C505.558 0.528723 504.003 0.734456 507.481 0.685442C508.884 0.665837 510.66 0.404826 513.18 0.540056C518.069 0.506547 522.591 0.575757 527.493 0.52791C527.714 0.525791 528.411 0.452945 528.929 0.453936C529.699 0.455549 530.121 0.489596 530.67 0.491839C532.973 0.502094 535.08 0.472965 537.299 0.477495C538.142 0.479142 537.847 0.514346 538.852 0.516314C539.857 0.518249 540.527 0.471891 541.888 0.49428C542.916 0.511346 543.944 0.606099 545.309 0.617144C545.361 0.52368 546.298 0.525605 547.964 0.500933C548.284 0.496146 547.941 0.463616 548.092 0.459673C548.708 0.442907 549.279 0.469868 549.864 0.451617C550.006 0.447233 550.013 0.415315 550.13 0.40993C551.12 0.362924 552.75 0.434721 553.03 0.447222C554.104 0.494698 554.605 0.453185 555.429 0.47188C556.251 0.490574 555.022 0.513942 555.982 0.525286C557.972 0.548749 560.529 0.543594 562.551 0.545061C563.357 0.545449 562.807 0.502843 562.923 0.501909C564.59 0.491103 566.277 0.536424 567.202 0.451556C568.358 0.670994 568.207 0.430271 570.591 0.4742C570.779 0.477753 571.018 0.581523 570.297 0.596758C569.576 0.611978 568.483 0.579541 567.483 0.603289C567.246 0.608862 565.889 0.706102 565.704 0.711992C564.253 0.758027 564.048 0.602956 563.971 0.594438C563.101 0.502523 561.443 0.60728 561.006 0.614519C559.009 0.647687 557.312 0.625878 555.641 0.649553C554.548 0.664854 554.442 0.766432 553.583 0.763322C550.731 0.753046 549.736 0.611344 547.048 0.734209C546.471 0.760413 547.044 0.871434 544.979 0.784135C544.849 0.778632 543.316 0.698769 542.43 0.749284C542.319 0.755653 542.322 0.788009 542.176 0.790727C541.192 0.808308 540.536 0.782532 539.465 0.794877C538.394 0.807223 537.106 0.825627 535.883 0.814653C535.146 0.80809 534.201 0.747808 533.848 0.733049C532.852 0.690533 531.783 0.760241 531.166 0.708757C530.544 0.657014 531.76 0.578433 530.128 0.545C530.068 0.629062 529.929 0.715343 529.832 0.799882C526.255 0.796922 522.736 0.76974 519.148 0.773454C518.703 0.773999 519.158 0.819191 518.681 0.820939C516.669 0.828119 514.911 0.795903 512.824 0.808732C511.209 0.818836 509.438 0.866685 507.749 0.878739C506.717 0.782549 504.211 0.815203 502.39 0.806413C501.752 0.803376 501.795 0.777685 501.341 0.769304C499.63 0.738306 500.432 0.823309 499.963 0.836686C497.95 0.893778 497.778 0.701379 495.405 0.706133C495.279 0.706319 493.743 0.808876 493.531 0.815263C492.186 0.856909 493.308 0.779567 492.467 0.771989C490.93 0.758142 489.862 0.733649 488.059 0.763688C487.534 0.772586 486.273 0.836509 485.252 0.787065C485.117 0.78059 485.192 0.746692 485.084 0.744707C483.127 0.711615 483.075 0.818129 481.957 0.854203C480.839 0.890269 479.112 0.816741 478.76 0.795549C477.84 0.740727 479.465 0.77212 479.515 0.76674C480.1 0.702717 478.84 0.71374 477.877 0.70833C477.738 0.603891 476.392 0.61016 476.879 0.703142C476.935 0.713298 477.684 0.703558 477.877 0.70833C477.032 0.810799 475.553 0.823922 473.919 0.728166C473.154 0.683287 473.877 0.63096 471.554 0.650102C470.5 0.658744 470.907 0.730655 469.976 0.750261C467.85 0.794993 465.088 0.727912 462.896 0.738481C462.101 0.742318 462.876 0.781682 462.332 0.785661C460.889 0.796343 459.617 0.766808 458.168 0.781938C458.037 0.783359 458.358 0.824565 457.907 0.82509C454.491 0.829875 451.517 0.803482 447.951 0.802751C446.227 0.802416 443.147 0.825142 441.362 0.820573C438.268 0.812897 434.462 0.752977 431.819 0.767534C430.095 0.776851 430.473 0.818066 429.735 0.846147C428.31 0.900579 425.787 0.803078 425.447 0.78798C425.437 0.787481 426.92 0.777765 426.129 0.756608C425.668 0.712525 425.464 0.787789 425.447 0.78798C425.224 0.778227 422.261 0.768871 421.672 0.77675C421.353 0.781055 421.532 0.820104 421.365 0.821611C417.403 0.856555 413.434 0.86648 409.415 0.848222C409.344 0.847433 409.451 0.803755 409.285 0.802446C406.958 0.783025 405.468 0.836457 403.55 0.86818C401.631 0.899889 400.11 0.889269 398.974 0.814286C397.527 0.823727 395.45 0.790578 394.255 0.770463C393.06 0.750349 392.893 0.835372 392.788 0.837052C389.508 0.89085 387.612 0.842185 384.21 0.834611C382.592 0.830865 379.384 0.843197 377.632 0.852494C376.248 0.859984 375.414 0.840059 374.138 0.8528C373.966 0.854501 374.14 0.892357 374.088 0.893815C372.664 0.939108 373.348 0.846562 373.054 0.830033C371.989 0.769927 371.331 0.737915 369.508 0.766191C369.087 0.772666 367.862 0.90592 367.096 0.913712C366.1 0.9236 366.476 0.875837 365.432 0.887406C365.343 0.888353 365.361 0.917819 364.718 0.91652C361.728 0.910877 358.469 0.893731 355.363 0.896684C354.939 0.896974 355.483 0.943712 354.87 0.944901C351.993 0.950441 348.84 0.948712 346.037 0.926835C345.347 0.921303 345.78 0.888578 345.63 0.878861C344.711 0.820069 343.407 0.905493 343.192 0.907121C338.061 0.948171 334.133 0.870864 328.903 0.90767C328.619 0.909831 326.427 1.00141 325.45 0.922868C325.383 0.917642 324.415 0.837289 323.56 0.892228C323.507 0.895665 324.11 0.937033 323.058 0.932816C322.006 0.928609 320.313 0.956234 318.867 0.910783C318.41 0.896465 317.328 0.816309 315.962 0.880204C315.873 0.884665 313.765 1.02914 313.013 0.929459C312.891 0.913051 313.019 0.807566 311.389 0.86165C311.078 0.872135 311.643 0.895663 310.823 0.910355C309.566 0.932999 307.901 0.904747 306.355 0.951737C306.086 0.960056 304.939 1.03165 304.019 0.977311C303.875 0.9688 304.149 0.933584 303.663 0.929643C301.352 0.910738 298.933 0.934294 296.587 0.909928C295.756 0.901367 296.181 0.844435 295.315 0.829179C294.449 0.813928 292.703 0.799257 291.797 0.825273C290.89 0.8513 291.881 0.942035 290.523 0.949296C284.618 0.98083 278.769 0.927602 272.873 0.919816C271.999 0.918653 272.724 0.951121 271.435 0.951737C266.684 0.954153 258.481 0.984595 254.359 0.915604C251.056 0.860347 255.212 0.818279 252.688 0.795793C251.47 0.785066 250.153 0.890555 249.859 0.893876C246.986 0.927611 244.99 0.880882 242.405 0.895219C241.871 0.898194 242.394 0.940949 241.94 0.943009C240.388 0.950424 238.757 0.93134 237.274 0.93483C236.608 0.936495 236.731 0.96915 236.119 0.96663C234.654 0.960975 233.358 0.947249 231.93 0.916642C231.8 0.913853 232.678 0.873231 231.594 0.87172C229.84 0.869391 227.663 0.839197 225.645 0.870378C225.046 0.879757 225.022 0.95439 223.735 0.902848C223.465 0.892083 223.81 0.802465 222.31 0.879899C222.058 0.892767 219.539 0.99721 218.303 0.929887C217.977 0.912168 217.145 0.838833 216.425 0.850358C216.327 0.852197 216.719 0.892285 216.122 0.896195C214.019 0.909279 211.815 0.905002 209.655 0.917558C209.078 0.92099 209.937 0.962473 209.077 0.966263C206.713 0.976749 203.761 0.966186 201.448 0.953202C200.596 0.948336 201.185 0.913973 201.123 0.910233C200.126 0.849408 199.536 0.931508 199.205 0.936295C197.146 0.96496 195.578 0.926395 193.68 0.936601C193.156 0.939313 193.528 0.978459 193.424 0.981949C192.342 1.01605 193.148 0.945754 192.463 0.938004C190.546 0.916062 188.409 0.919208 186.47 0.92421C185.757 0.926105 186.558 0.971496 185.919 0.972672C182.136 0.980494 178.203 0.97615 174.511 0.951127C173.816 0.946333 174.253 0.911381 174.108 0.903397C173.11 0.847545 171.646 0.923728 171.309 0.930985C169.778 0.964121 169.183 0.933212 167.831 0.938981C161.226 0.967705 153.07 0.947234 146.834 0.934586C138.709 0.918309 132.404 0.885059 124.656 0.893693C124.163 0.894198 124.66 0.940695 124.236 0.941727C118.755 0.952936 113.359 0.934767 107.867 0.948197C107.417 0.949217 108.066 0.993296 107.343 0.996415C105.859 1.00312 103.98 1.00072 102.48 0.986649C101.748 0.979868 102.729 0.942043 101.993 0.93599C100.278 0.921809 98.44 0.91867 96.6785 0.925736C95.9289 0.92884 97.0599 0.973922 96.0855 0.974442C89.4487 0.978915 82.9305 0.986679 76.2237 0.9283C75.7639 0.92429 75.3605 0.832665 74.3829 0.850236C74.3092 0.875664 74.3132 0.905576 74.2811 0.932755C64.6195 0.947396 55.0565 0.915633 45.3678 0.910722C44.9593 0.910525 45.6652 0.959073 44.8744 0.958939C40.297 0.958222 35.8521 0.971671 31.17 0.923417C30.7054 0.918698 30.9437 0.833291 29.5747 0.846208C29.3333 0.848565 27.2714 0.859955 26.7383 0.878495C26.6659 0.881292 27.042 0.921156 26.3776 0.922318C22.5165 0.928372 18.4703 0.919271 14.6158 0.894914C13.9937 0.890906 14.6562 0.848454 14.2131 0.845231C11.0702 0.822696 7.65159 0.854967 4.64837 0.816423C2.63812 0.79047 3.38237 0.717087 2.31415 0.644853C2.16306 0.634662 0.918256 0.633047 0.853883 0.591021C0.688618 0.48534 1.29156 0.369621 1.04416 0.256976C0.991891 0.232713 -0.675228 0.258846 0.311813 0.200214C0.380769 0.19629 1.58944 0.17683 1.88713 0.15694C2.0944 0.143188 1.7209 0.100447 2.14379 0.0828434C2.56664 0.0652564 3.0313 0.101084 3.73238 0.080402C4.43315 0.0594636 4.12502 0.0108407 5.52453 0.00508493ZM388.874 0.680559C387.767 0.639728 387.604 0.789275 388.801 0.753496C388.859 0.751589 388.931 0.682562 388.874 0.680559ZM522.756 0.656938C521.31 0.590977 520.32 0.687966 521.34 0.738908C522.361 0.789796 523.197 0.676934 522.756 0.656938ZM537.757 0.608782C536.067 0.556775 535.8 0.768839 537.611 0.725969C537.716 0.723546 537.856 0.611802 537.757 0.608782ZM7.268 0.624285C7.25273 0.622299 6.35791 0.620363 6.33653 0.622331C5.86006 0.669827 7.64932 0.673665 7.268 0.624285ZM552.643 0.556353C552.115 0.527666 550.596 0.560781 551.251 0.596453C551.779 0.625149 553.3 0.592037 552.643 0.556353ZM331.151 0.520952C331.134 0.518724 330.492 0.516717 330.505 0.529314C330.549 0.569886 331.441 0.558436 331.151 0.520952ZM577.943 0.553911C574.205 0.545929 571.939 0.370754 576.01 0.390521C576.747 0.394097 574.421 0.446383 575.359 0.462176C577.076 0.490948 578.216 0.38096 579.968 0.439898C580.285 0.450686 578.157 0.554756 577.937 0.554155C577.939 0.554074 577.941 0.553993 577.943 0.553911ZM388.237 0.500933C388.215 0.498955 387.327 0.49708 387.305 0.499041C386.824 0.546518 388.613 0.550323 388.237 0.500933ZM293.717 0.428484C293.668 0.424271 291.608 0.420329 291.54 0.424212C290.465 0.50185 294.632 0.510048 293.717 0.428484ZM448.046 0.391497C449.015 0.343735 450.174 0.338112 450.946 0.398089C449.983 0.394905 449.014 0.394436 448.046 0.391497Z"
                        fill="black"
                    />
                </svg>
            </div>

            <div className={styles.formInputs}>
                <TextInput
                    label="Имя"
                    placeholder="Имя*"
                    value={name.value}
                    onChange={name.onChange}
                    error={errors.name}
                    autoComplete="name"
                    classNames={{
                        root: styles.formInputRoot,
                        input: styles.formInput,
                        label: styles.formInputLabel,
                        error: styles.formInputError,
                    }}
                />

                <TextInput
                    label="Телефон"
                    placeholder="Телефон*"
                    value={phone.value}
                    onChange={phone.onChange}
                    error={errors.phone}
                    autoComplete="phone"
                    classNames={{
                        root: styles.formInputRoot,
                        input: styles.formInput,
                        label: styles.formInputLabel,
                        error: styles.formInputError,
                    }}
                />
            </div>

            <div className={styles.formMessengers}>
                <h4 className={styles.formMessengersTitle}>Выберите способ связи</h4>

                <div className={styles.formMessengersItems}>
                    <button
                        className={clsx(styles.formMessengersItem, {
                            [styles.selected]: messengers.includes('call'),
                        })}
                        onClick={() => handleSelectMessengers('call')}
                    >
                        Звонок
                    </button>
                    <button
                        className={clsx(styles.formMessengersItem, {
                            [styles.selected]: messengers.includes('whatsApp'),
                        })}
                        onClick={() => handleSelectMessengers('whatsApp')}
                    >
                        WhatsApp
                    </button>
                    <button
                        className={clsx(styles.formMessengersItem, {
                            [styles.selected]: messengers.includes('telegram'),
                        })}
                        onClick={() => handleSelectMessengers('telegram')}
                    >
                        Telegram
                    </button>
                    <button
                        className={clsx(styles.formMessengersItem, {
                            [styles.selected]: messengers.includes('max'),
                        })}
                        onClick={() => handleSelectMessengers('max')}
                    >
                        MAX
                    </button>
                </div>
            </div>

            <div className={styles.formTimes}>
                <h4 className={styles.formTimesTitle}>Выберите удобное время</h4>

                <div className={styles.formTimesItems}>
                    {timeSlots.map((s) => (
                        <button
                            key={s.id}
                            type="button"
                            className={clsx(styles.formTimesItem, {
                                [styles.selected]: time === s.id,
                            })}
                            onClick={() => handleSelectTime(s.id)}
                        >
                            {s.label}
                        </button>
                    ))}
                </div>
            </div>

            <div className={styles.formFooter}>
                <svg
                    className={styles.formFooterImg}
                    width="580"
                    height="1"
                    viewBox="0 0 580 1"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M5.52453 0.00508493C8.77469 -0.00794148 13.0351 0.00598687 16.273 0.0251043C17.2877 0.0310336 16.7739 0.0575377 17.4744 0.062824C18.8444 0.0731291 20.1208 0.0601305 21.4747 0.0724065C21.9233 0.0766045 21.3648 0.118587 21.8353 0.122028C24.4134 0.140582 26.8524 0.129888 29.4641 0.138812C42.3284 0.182843 54.9736 0.198602 67.9953 0.217731C72.2889 0.224002 77.5083 0.262103 81.9431 0.245441C82.4608 0.243458 82.1521 0.206608 82.2506 0.203571C83.7955 0.157075 83.2819 0.231467 84.2906 0.241351C88.2941 0.280377 92.746 0.283771 96.5989 0.269549C98.238 0.263391 96.5945 0.190198 98.245 0.23128C98.3596 0.234056 97.9437 0.273188 98.3932 0.277362C99.4126 0.286749 101.347 0.279755 102.137 0.282855C103.659 0.289028 103.911 0.288635 105.352 0.289081C107.32 0.290031 109.662 0.309483 111.775 0.300616C112.226 0.298607 111.629 0.258493 112.348 0.251666C113.067 0.244851 114.971 0.248252 115.613 0.257709C116.255 0.26717 115.982 0.298699 116.096 0.305926C117.03 0.366925 119.233 0.282442 119.516 0.280353C124.683 0.244753 129.114 0.29288 133.964 0.292743C137.646 0.292536 141.583 0.276648 145.086 0.278827C149.26 0.281578 152.798 0.303315 156.853 0.299579C157.281 0.29923 156.779 0.252065 157.302 0.251544C162.855 0.246056 168.369 0.251197 173.898 0.283038C174.452 0.286273 173.738 0.327684 174.292 0.333392C177.684 0.367424 183.05 0.449179 185.065 0.268878C187.362 0.275918 190.151 0.283193 192.207 0.319537C193.532 0.342929 192.245 0.388042 193.873 0.368792C194.24 0.364503 193.762 0.324995 194.313 0.321551C196.631 0.307088 199.164 0.31993 201.457 0.299518C201.924 0.295273 201.796 0.259872 201.929 0.253497C203.039 0.201871 204.888 0.287213 205.292 0.293414C208.361 0.339658 210.603 0.32146 213.462 0.322589C214.126 0.322871 213.342 0.27532 213.98 0.273883C217.292 0.267068 220.723 0.271155 223.965 0.292254C224.687 0.297062 224.023 0.337567 224.368 0.341937C225.888 0.360712 226.225 0.284209 227.682 0.300738C227.99 0.304125 227.817 0.3388 227.873 0.342608C228.75 0.402389 229.512 0.317684 229.738 0.315814C232.592 0.290261 234.417 0.378689 237.174 0.366168C237.504 0.36458 236.76 0.320706 237.687 0.318927C243.865 0.306815 250.399 0.318867 256.514 0.353961C257.465 0.359358 256.786 0.392317 256.846 0.39638C257.821 0.459864 258.452 0.374803 258.762 0.3716C261.207 0.348541 263.492 0.419874 265.154 0.31856C275.511 0.35372 285.822 0.296827 296.094 0.387591C296.224 0.388642 295.99 0.430535 296.251 0.432452C299.388 0.455974 298.786 0.390866 300.862 0.311236C301.385 0.291241 302.976 0.38738 303.116 0.394427C303.629 0.420396 303.097 0.48272 303.269 0.487749C304.69 0.527241 304.458 0.32113 306.375 0.321063C306.435 0.321407 306.184 0.359344 306.344 0.363116C306.844 0.374958 307.34 0.359883 307.829 0.372943C308.948 0.403161 309.347 0.503313 311.057 0.445025C311.274 0.43746 310.943 0.320545 312.655 0.326068C313.337 0.328369 316.357 0.326365 317.203 0.333941C318.049 0.341509 317.468 0.379185 317.529 0.380816C319.807 0.430636 318.943 0.451284 320.084 0.525042C321.225 0.598522 320.909 0.423265 321.374 0.403704C321.84 0.384199 323.51 0.425303 323.921 0.439593C324.331 0.453888 323.819 0.477829 324.184 0.485918C326.603 0.538773 325.246 0.398928 326.043 0.371112C327.921 0.305249 329.385 0.435219 331.105 0.447955C331.57 0.451394 331.19 0.421792 331.605 0.419024C333.246 0.408452 334.233 0.449006 336.101 0.411822C336.406 0.405762 337.916 0.327621 338.893 0.384966C339.031 0.393236 338.638 0.425624 339.338 0.432879C340.383 0.443767 342.265 0.450846 343.389 0.44002C344.218 0.43201 343.268 0.378642 344.311 0.39522C344.775 0.402623 343.915 0.433844 344.787 0.445147C345.654 0.456447 347.871 0.455075 348.714 0.453997C349.556 0.452895 349.095 0.412413 349.163 0.409686C349.575 0.394063 351.191 0.374542 351.334 0.374591C358.537 0.369649 365.179 0.437886 372.191 0.415301C372.742 0.413587 372.375 0.370898 372.459 0.370196C374.343 0.35231 372.858 0.465811 374.174 0.503802C373.984 0.417172 374.761 0.432858 376.088 0.423357C376.727 0.418709 376.379 0.385165 376.437 0.381732C377.386 0.330783 378.046 0.39659 378.216 0.410052C378.844 0.459572 379.528 0.401061 379.955 0.434161C380.382 0.467013 379.399 0.515717 380.672 0.515093C381.029 0.484083 380.084 0.403044 381.05 0.38991C384.696 0.340231 391.502 0.403813 394.434 0.410418C397.36 0.417017 398.305 0.411296 400.01 0.422503C403.089 0.442767 401.961 0.382641 403.873 0.35512C405.79 0.327603 404.858 0.475539 405.134 0.507342C405.404 0.53913 405.7 0.506407 406.037 0.523882C406.372 0.541353 405.646 0.562976 406.435 0.569536C407.224 0.57609 409.383 0.519537 409.663 0.486285C410.255 0.415836 409.282 0.341897 411.371 0.367877C411.491 0.369419 411.101 0.408318 411.561 0.412249C415.215 0.442195 419.012 0.444052 422.661 0.470538C423.163 0.47424 422.715 0.517514 423.007 0.520159C426.049 0.547838 424.961 0.474872 426.629 0.393817C426.254 0.501684 427.176 0.567679 429.485 0.568316C430.873 0.568736 430.634 0.521625 431.531 0.488421C431.801 0.478411 432.783 0.51076 432.961 0.488604C433.548 0.41618 432.623 0.335106 435.003 0.367388C435.107 0.368923 434.775 0.408567 435.136 0.410967C437.468 0.426682 437.747 0.350928 440.269 0.341754C442.245 0.334555 445.76 0.380749 448.01 0.388262C447.963 0.509537 450.089 0.481767 450.951 0.39815C452.411 0.401573 453.989 0.396846 455.4 0.408404C455.886 0.412344 455.567 0.447457 455.628 0.45125C456.568 0.510765 457.202 0.429415 457.518 0.426226C460.934 0.395224 463.718 0.456881 466.978 0.396624C467.094 0.394454 467.282 0.310213 468.153 0.371722C468.21 0.375962 467.133 0.41429 468.667 0.417254C470.201 0.420225 473.093 0.465384 475.222 0.426348C475.738 0.416951 477.041 0.348564 478.088 0.401995C478.227 0.409251 478.074 0.433411 478.276 0.446856C478.926 0.489695 479.281 0.404549 480.046 0.476885C480.81 0.549219 482.4 0.603391 484.548 0.553484C484.617 0.552033 485.125 0.484546 485.8 0.485613C486.879 0.487375 488.409 0.501433 489.535 0.500994C490.074 0.500759 489.729 0.458853 489.823 0.458086C493.447 0.434604 496.027 0.471963 499.91 0.488177C500.621 0.491232 502.667 0.434086 504.045 0.479266C505.558 0.528723 504.003 0.734456 507.481 0.685442C508.884 0.665837 510.66 0.404826 513.18 0.540056C518.069 0.506547 522.591 0.575757 527.493 0.52791C527.714 0.525791 528.411 0.452945 528.929 0.453936C529.699 0.455549 530.121 0.489596 530.67 0.491839C532.973 0.502094 535.08 0.472965 537.299 0.477495C538.142 0.479142 537.847 0.514346 538.852 0.516314C539.857 0.518249 540.527 0.471891 541.888 0.49428C542.916 0.511346 543.944 0.606099 545.309 0.617144C545.361 0.52368 546.298 0.525605 547.964 0.500933C548.284 0.496146 547.941 0.463616 548.092 0.459673C548.708 0.442907 549.279 0.469868 549.864 0.451617C550.006 0.447233 550.013 0.415315 550.13 0.40993C551.12 0.362924 552.75 0.434721 553.03 0.447222C554.104 0.494698 554.605 0.453185 555.429 0.47188C556.251 0.490574 555.022 0.513942 555.982 0.525286C557.972 0.548749 560.529 0.543594 562.551 0.545061C563.357 0.545449 562.807 0.502843 562.923 0.501909C564.59 0.491103 566.277 0.536424 567.202 0.451556C568.358 0.670994 568.207 0.430271 570.591 0.4742C570.779 0.477753 571.018 0.581523 570.297 0.596758C569.576 0.611978 568.483 0.579541 567.483 0.603289C567.246 0.608862 565.889 0.706102 565.704 0.711992C564.253 0.758027 564.048 0.602956 563.971 0.594438C563.101 0.502523 561.443 0.60728 561.006 0.614519C559.009 0.647687 557.312 0.625878 555.641 0.649553C554.548 0.664854 554.442 0.766432 553.583 0.763322C550.731 0.753046 549.736 0.611344 547.048 0.734209C546.471 0.760413 547.044 0.871434 544.979 0.784135C544.849 0.778632 543.316 0.698769 542.43 0.749284C542.319 0.755653 542.322 0.788009 542.176 0.790727C541.192 0.808308 540.536 0.782532 539.465 0.794877C538.394 0.807223 537.106 0.825627 535.883 0.814653C535.146 0.80809 534.201 0.747808 533.848 0.733049C532.852 0.690533 531.783 0.760241 531.166 0.708757C530.544 0.657014 531.76 0.578433 530.128 0.545C530.068 0.629062 529.929 0.715343 529.832 0.799882C526.255 0.796922 522.736 0.76974 519.148 0.773454C518.703 0.773999 519.158 0.819191 518.681 0.820939C516.669 0.828119 514.911 0.795903 512.824 0.808732C511.209 0.818836 509.438 0.866685 507.749 0.878739C506.717 0.782549 504.211 0.815203 502.39 0.806413C501.752 0.803376 501.795 0.777685 501.341 0.769304C499.63 0.738306 500.432 0.823309 499.963 0.836686C497.95 0.893778 497.778 0.701379 495.405 0.706133C495.279 0.706319 493.743 0.808876 493.531 0.815263C492.186 0.856909 493.308 0.779567 492.467 0.771989C490.93 0.758142 489.862 0.733649 488.059 0.763688C487.534 0.772586 486.273 0.836509 485.252 0.787065C485.117 0.78059 485.192 0.746692 485.084 0.744707C483.127 0.711615 483.075 0.818129 481.957 0.854203C480.839 0.890269 479.112 0.816741 478.76 0.795549C477.84 0.740727 479.465 0.77212 479.515 0.76674C480.1 0.702717 478.84 0.71374 477.877 0.70833C477.738 0.603891 476.392 0.61016 476.879 0.703142C476.935 0.713298 477.684 0.703558 477.877 0.70833C477.032 0.810799 475.553 0.823922 473.919 0.728166C473.154 0.683287 473.877 0.63096 471.554 0.650102C470.5 0.658744 470.907 0.730655 469.976 0.750261C467.85 0.794993 465.088 0.727912 462.896 0.738481C462.101 0.742318 462.876 0.781682 462.332 0.785661C460.889 0.796343 459.617 0.766808 458.168 0.781938C458.037 0.783359 458.358 0.824565 457.907 0.82509C454.491 0.829875 451.517 0.803482 447.951 0.802751C446.227 0.802416 443.147 0.825142 441.362 0.820573C438.268 0.812897 434.462 0.752977 431.819 0.767534C430.095 0.776851 430.473 0.818066 429.735 0.846147C428.31 0.900579 425.787 0.803078 425.447 0.78798C425.437 0.787481 426.92 0.777765 426.129 0.756608C425.668 0.712525 425.464 0.787789 425.447 0.78798C425.224 0.778227 422.261 0.768871 421.672 0.77675C421.353 0.781055 421.532 0.820104 421.365 0.821611C417.403 0.856555 413.434 0.86648 409.415 0.848222C409.344 0.847433 409.451 0.803755 409.285 0.802446C406.958 0.783025 405.468 0.836457 403.55 0.86818C401.631 0.899889 400.11 0.889269 398.974 0.814286C397.527 0.823727 395.45 0.790578 394.255 0.770463C393.06 0.750349 392.893 0.835372 392.788 0.837052C389.508 0.89085 387.612 0.842185 384.21 0.834611C382.592 0.830865 379.384 0.843197 377.632 0.852494C376.248 0.859984 375.414 0.840059 374.138 0.8528C373.966 0.854501 374.14 0.892357 374.088 0.893815C372.664 0.939108 373.348 0.846562 373.054 0.830033C371.989 0.769927 371.331 0.737915 369.508 0.766191C369.087 0.772666 367.862 0.90592 367.096 0.913712C366.1 0.9236 366.476 0.875837 365.432 0.887406C365.343 0.888353 365.361 0.917819 364.718 0.91652C361.728 0.910877 358.469 0.893731 355.363 0.896684C354.939 0.896974 355.483 0.943712 354.87 0.944901C351.993 0.950441 348.84 0.948712 346.037 0.926835C345.347 0.921303 345.78 0.888578 345.63 0.878861C344.711 0.820069 343.407 0.905493 343.192 0.907121C338.061 0.948171 334.133 0.870864 328.903 0.90767C328.619 0.909831 326.427 1.00141 325.45 0.922868C325.383 0.917642 324.415 0.837289 323.56 0.892228C323.507 0.895665 324.11 0.937033 323.058 0.932816C322.006 0.928609 320.313 0.956234 318.867 0.910783C318.41 0.896465 317.328 0.816309 315.962 0.880204C315.873 0.884665 313.765 1.02914 313.013 0.929459C312.891 0.913051 313.019 0.807566 311.389 0.86165C311.078 0.872135 311.643 0.895663 310.823 0.910355C309.566 0.932999 307.901 0.904747 306.355 0.951737C306.086 0.960056 304.939 1.03165 304.019 0.977311C303.875 0.9688 304.149 0.933584 303.663 0.929643C301.352 0.910738 298.933 0.934294 296.587 0.909928C295.756 0.901367 296.181 0.844435 295.315 0.829179C294.449 0.813928 292.703 0.799257 291.797 0.825273C290.89 0.8513 291.881 0.942035 290.523 0.949296C284.618 0.98083 278.769 0.927602 272.873 0.919816C271.999 0.918653 272.724 0.951121 271.435 0.951737C266.684 0.954153 258.481 0.984595 254.359 0.915604C251.056 0.860347 255.212 0.818279 252.688 0.795793C251.47 0.785066 250.153 0.890555 249.859 0.893876C246.986 0.927611 244.99 0.880882 242.405 0.895219C241.871 0.898194 242.394 0.940949 241.94 0.943009C240.388 0.950424 238.757 0.93134 237.274 0.93483C236.608 0.936495 236.731 0.96915 236.119 0.96663C234.654 0.960975 233.358 0.947249 231.93 0.916642C231.8 0.913853 232.678 0.873231 231.594 0.87172C229.84 0.869391 227.663 0.839197 225.645 0.870378C225.046 0.879757 225.022 0.95439 223.735 0.902848C223.465 0.892083 223.81 0.802465 222.31 0.879899C222.058 0.892767 219.539 0.99721 218.303 0.929887C217.977 0.912168 217.145 0.838833 216.425 0.850358C216.327 0.852197 216.719 0.892285 216.122 0.896195C214.019 0.909279 211.815 0.905002 209.655 0.917558C209.078 0.92099 209.937 0.962473 209.077 0.966263C206.713 0.976749 203.761 0.966186 201.448 0.953202C200.596 0.948336 201.185 0.913973 201.123 0.910233C200.126 0.849408 199.536 0.931508 199.205 0.936295C197.146 0.96496 195.578 0.926395 193.68 0.936601C193.156 0.939313 193.528 0.978459 193.424 0.981949C192.342 1.01605 193.148 0.945754 192.463 0.938004C190.546 0.916062 188.409 0.919208 186.47 0.92421C185.757 0.926105 186.558 0.971496 185.919 0.972672C182.136 0.980494 178.203 0.97615 174.511 0.951127C173.816 0.946333 174.253 0.911381 174.108 0.903397C173.11 0.847545 171.646 0.923728 171.309 0.930985C169.778 0.964121 169.183 0.933212 167.831 0.938981C161.226 0.967705 153.07 0.947234 146.834 0.934586C138.709 0.918309 132.404 0.885059 124.656 0.893693C124.163 0.894198 124.66 0.940695 124.236 0.941727C118.755 0.952936 113.359 0.934767 107.867 0.948197C107.417 0.949217 108.066 0.993296 107.343 0.996415C105.859 1.00312 103.98 1.00072 102.48 0.986649C101.748 0.979868 102.729 0.942043 101.993 0.93599C100.278 0.921809 98.44 0.91867 96.6785 0.925736C95.9289 0.92884 97.0599 0.973922 96.0855 0.974442C89.4487 0.978915 82.9305 0.986679 76.2237 0.9283C75.7639 0.92429 75.3605 0.832665 74.3829 0.850236C74.3092 0.875664 74.3132 0.905576 74.2811 0.932755C64.6195 0.947396 55.0565 0.915633 45.3678 0.910722C44.9593 0.910525 45.6652 0.959073 44.8744 0.958939C40.297 0.958222 35.8521 0.971671 31.17 0.923417C30.7054 0.918698 30.9437 0.833291 29.5747 0.846208C29.3333 0.848565 27.2714 0.859955 26.7383 0.878495C26.6659 0.881292 27.042 0.921156 26.3776 0.922318C22.5165 0.928372 18.4703 0.919271 14.6158 0.894914C13.9937 0.890906 14.6562 0.848454 14.2131 0.845231C11.0702 0.822696 7.65159 0.854967 4.64837 0.816423C2.63812 0.79047 3.38237 0.717087 2.31415 0.644853C2.16306 0.634662 0.918256 0.633047 0.853883 0.591021C0.688618 0.48534 1.29156 0.369621 1.04416 0.256976C0.991891 0.232713 -0.675228 0.258846 0.311813 0.200214C0.380769 0.19629 1.58944 0.17683 1.88713 0.15694C2.0944 0.143188 1.7209 0.100447 2.14379 0.0828434C2.56664 0.0652564 3.0313 0.101084 3.73238 0.080402C4.43315 0.0594636 4.12502 0.0108407 5.52453 0.00508493ZM388.874 0.680559C387.767 0.639728 387.604 0.789275 388.801 0.753496C388.859 0.751589 388.931 0.682562 388.874 0.680559ZM522.756 0.656938C521.31 0.590977 520.32 0.687966 521.34 0.738908C522.361 0.789796 523.197 0.676934 522.756 0.656938ZM537.757 0.608782C536.067 0.556775 535.8 0.768839 537.611 0.725969C537.716 0.723546 537.856 0.611802 537.757 0.608782ZM7.268 0.624285C7.25273 0.622299 6.35791 0.620363 6.33653 0.622331C5.86006 0.669827 7.64932 0.673665 7.268 0.624285ZM552.643 0.556353C552.115 0.527666 550.596 0.560781 551.251 0.596453C551.779 0.625149 553.3 0.592037 552.643 0.556353ZM331.151 0.520952C331.134 0.518724 330.492 0.516717 330.505 0.529314C330.549 0.569886 331.441 0.558436 331.151 0.520952ZM577.943 0.553911C574.205 0.545929 571.939 0.370754 576.01 0.390521C576.747 0.394097 574.421 0.446383 575.359 0.462176C577.076 0.490948 578.216 0.38096 579.968 0.439898C580.285 0.450686 578.157 0.554756 577.937 0.554155C577.939 0.554074 577.941 0.553993 577.943 0.553911ZM388.237 0.500933C388.215 0.498955 387.327 0.49708 387.305 0.499041C386.824 0.546518 388.613 0.550323 388.237 0.500933ZM293.717 0.428484C293.668 0.424271 291.608 0.420329 291.54 0.424212C290.465 0.50185 294.632 0.510048 293.717 0.428484ZM448.046 0.391497C449.015 0.343735 450.174 0.338112 450.946 0.398089C449.983 0.394905 449.014 0.394436 448.046 0.391497Z"
                        fill="black"
                    />
                </svg>
                <div className={styles.formButtonBlock}>
                    <button
                        type="submit"
                        disabled={isLoading}
                        className={styles.formButton}
                        onClick={handleSendMessage}
                    >
                        {isLoading ? <BaseLoader size="20px" /> : 'Отправить'}
                    </button>

                    <p className={styles.formButtonDesk}>
                        Нажимая кнопку «Отправить», Вы даёте согласие на обработку персональных
                        данных и соглашаетесь с{' '}
                        <Link className={styles.formButtonDeskPrivacyPolicy} to="/privacyPolicy">
                            Политикой конфиденциальности
                        </Link>
                    </p>
                </div>
            </div>
        </div>
    );
};
